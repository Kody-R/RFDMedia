const rosterData = [
    {
        number: 1,
        name: "Nick Alonso",
        position: "OF",
        height: "6-1",
        class: "R-Fr.",
        hometown: "Miami, FL",

    },
    {
        number: 2,
        name: "Thaxton Berch",
        position: "INF",
        height: "5-10",
        class: "Jr.",
        hometown: "Jackson, MS",

    },
    {
        number: 3,
        name: "Will Safford",
        position: "INF",
        height: "5-8",
        class: "R-Jr.",
        hometown: "Baton Rouge, LA",

    },
    {
        number: 4,
        name: "Brody Drost",
        position: "OF",
        height: "6-3",
        class: "R-Jr.",
        hometown: "Lake Charles, LA",

    },
    {
        number: 5,
        name: "Cole McConnell",
        position: "OF",
        height: "6-1",
        class: "Sr.",
        hometown: "Beaumont, TX",

    },
    {
        number: 6,
        name: "Adarius Myers",
        position: "OF",
        height: "5-10",
        class: "R-Sr.",
        hometown: "Seminary, MS",

    },
    {
        number: 7,
        name: "Michael Ballard",
        position: "INF",
        height: "6-0",
        class: "Sr.",
        hometown: "Longwood, FL",

    },
    {
        number: 9,
        name: "Colton Coates",
        position: "INF",
        height: "6-0",
        class: "Fr.",
        hometown: "Southaven, MS",

    },
    {
        number: 10,
        name: "Logan McLeod",
        position: "INF",
        height: "5-10",
        class: "Sr.",
        hometown: "Sour Lake, TX",
    },
    {
        number: 12,
        name: "Jorge Corona",
        position: "C/OF",
        height: "6-2",
        class: "Sr.",
        hometown: "Miami, FL",

    },
    {
        number: 13,
        name: "Jake Smith",
        position: "INF",
        height: "5-10",
        class: "Fr.",
        hometown: "Rosepine, LA",

    },
    {
        number: 14,
        name: "Grant Comeaux",
        position: "INF",
        height: "6-1",
        class: "R-Fr.",
        hometown: "Lake Charles, LA",

    },
    {
        number: 15,
        name: "CJ Sturiale",
        position: "OF/LHP",
        height: "5-10",
        class: "R-Fr.",
        hometown: "Denham Springs, LA",

    },
    {
        number: 16,
        name: "Ethan Bates",
        position: "INF/P",
        height: "6-0",
        class: "Sr.",
        hometown: "Hot Springs, AR",

    },
    {
        number: 17,
        name: "Slade Netterville",
        position: "INF",
        height: "5-9",
        class: "R-So.",
        hometown: "Shreveport, LA",

    },
    {
        number: 18,
        name: "Kasten Furr",
        position: "INF",
        height: "5-9",
        class: "Sr.",
        hometown: "Ruston, LA",

    },
    {
        number: 19,
        name: "Luke Smith",
        position: "OF",
        height: "6-0",
        class: "R-Fr.",
        hometown: "Texarkana, TX",

    },
    {
        number: 20,
        name: "Grant Hubka",
        position: "RHP",
        height: "6-4",
        class: "Sr.",
        hometown: "Gretna, NE",

    },
    {
        number: 21,
        name: "Jake LaRocca",
        position: "C",
        height: "5-10",
        class: "Fr.",
        hometown: "Lake Charles, LA",

    },
    {
        number: 24,
        name: "Dalton Davis",
        position: "INF",
        height: "6-0",
        class: "Sr.",
        hometown: "Frisco, TX",

    },
    {
        number: 25,
        name: "Reid Snider",
        position: "INF",
        height: "6-2",
        class: "Fr.",
        hometown: "Lake Charles, LA",

    },
    {
        number: 26,
        name: "Blake Hooks",
        position: "RHP",
        height: "6-0",
        class: "Jr.",
        hometown: "Petal, MS",
    },
    {
        number: 28,
        name: "Caden Copeland",
        position: "LHP",
        height: "6-2",
        class: "Jr.",
        hometown: "Midlothian, TX",
    },
    {
        number: 29,
        name: "Isaac Crabb",
        position: "RHP",
        height: "6-2",
        class: "Sr.",
        hometown: "Harrisburg, IL",
    },
    {
        number: 30,
        name: "Hutson Guinn",
        position: "INF/OF",
        height: "6-0",
        class: "Fr.",
        hometown: "Paragould, AR",
    },
    {
        number: 31,
        name: "Sam Brodersen",
        position: "RHP",
        height: "6-1",
        class: "Sr.",
        hometown: "Orlando, FL",
    },
    {
        number: 32,
        name: "Luke Nichols",
        position: "LHP",
        height: "6-2",
        class: "Jr.",
        hometown: "Bell City, MO",
    },
    {
        number: 33,
        name: "Connor Nation",
        position: "LHP",
        height: "6-0",
        class: "Jr.",
        hometown: "Madison, MS",
    },
    {
        number: 34,
        name: "Turner Swistak",
        position: "RHP",
        height: "6-3",
        class: "R-Jr.",
        hometown: "Hattiesburg, MS",
    },
    {
        number: 35,
        name: "Nick Fraginals",
        position: "RHP",
        height: "6-3",
        class: "So.",
        hometown: "Miramar, FL",
    },
    {
        number: 36,
        name: "Greg Martinez",
        position: "RHP",
        height: "6-3",
        class: "Sr.",
        hometown: "Southwest Ranches, FL",
    },
    {
        number: 37,
        name: "Reece Tarini",
        position: "LHP",
        height: "5-10",
        class: "Fr.",
        hometown: "Little Rock, AR",
    },
    {
        number: 38,
        name: "Nate Crider",
        position: "RHP",
        height: "6-4",
        class: "Jr.",
        hometown: "Paragould, AR",
    },
    {
        number: 39,
        name: "Ryan Harland",
        position: "LHP",
        height: "5-8",
        class: "Jr.",
        hometown: "Baton Rouge, LA",
    },
    {
        number: 40,
        name: "Reed Smith",
        position: "RHP",
        height: "6-2",
        class: "Sr.",
        hometown: "Lufkin, TX",
    },
    {
        number: 41,
        name: "Cade Patterson",
        position: "OF",
        height: "6-1",
        class: "Fr.",
        hometown: "Ruston, LA",
    },
    {
        number: 44,
        name: "Karson Evans",
        position: "INF/1B",
        height: "6-2",
        class: "So.",
        hometown: "Taylorsville, MS",
    },
    {
        number: 45,
        name: "Jacob Havern",
        position: "RHP",
        height: "6-6",
        class: "So.",
        hometown: "Round Rock, TX",
    },
    {
        number: 46,
        name: "Hayden Harmon",
        position: "RHP",
        height: "5-11",
        class: "Fr.",
        hometown: "Minden, LA",
    },
    {
        number: 50,
        name: "Ryan Porche",
        position: "RHP",
        height: "6-4",
        class: "R-Fr.",
        hometown: "River Ridge, LA",
    },
    {
        number: 51,
        name: "R.J. Brown",
        position: "C",
        height: "5-9",
        class: "Fr.",
        hometown: "Ruston, LA",
    },
    {
        number: 52,
        name: "Brenton Thiels",
        position: "RHP",
        height: "7-0",
        class: "Sr.",
        hometown: "Otis, LA",
    },
    {
        number: 54,
        name: "Haydan Toal",
        position: "LHP",
        height: "6-1",
        class: "R-Fr.",
        hometown: "Pineville, LA",
    },
    {
        number: 57,
        name: "Will Melby Jr.",
        position: "RHP",
        height: "6-5",
        class: "R-So.",
        hometown: "Munster, IN",
    },

];
const guessInput = document.getElementById('guess-input');
const dropdown = document.getElementById('dropdown');
const submitGuessButton = document.getElementById('submit-guess');
const resultsElement = document.getElementById('results');
const hintElement = document.getElementById('hint');
const newPuzzleButton = document.getElementById('new-puzzle');

let chosenPlayer = rosterData[Math.floor(Math.random() * rosterData.length)];
let chosenPlayerFullName = chosenPlayer.name.toUpperCase();
let chosenPlayerState = chosenPlayer.hometown.split(', ')[1];
const maxGuesses = 6;
let guessesRemaining = maxGuesses;

guessInput.addEventListener('input', () => {
    const input = guessInput.value.trim().toUpperCase();
    dropdown.innerHTML = '';
    if (input.length > 0) {
        const matchingPlayers = rosterData.filter(player => player.name.toUpperCase().startsWith(input));
        matchingPlayers.forEach(player => {
            const div = document.createElement('div');
            div.textContent = player.name;
            div.addEventListener('click', () => {
                guessInput.value = player.name;
                dropdown.innerHTML = '';
                dropdown.style.display = 'none';
            });
            dropdown.appendChild(div);
        });
        dropdown.style.display = 'block';
    } else {
        dropdown.style.display = 'none';
    }
});

// Handle guess submission from input field
submitGuessButton.addEventListener('click', () => {
    const guess = guessInput.value.trim().toUpperCase();
    if (guess.length > 0) {
        checkGuess(guess);
    }
});

newPuzzleButton.addEventListener('click', startNewPuzzle);

function checkGuess(guess) {
    const guessedPlayer = rosterData.find(player => player.name.toUpperCase() === guess);
    if (guessedPlayer) {
        displayResult(guessedPlayer);
        if (guess === chosenPlayerFullName) {
            hintElement.textContent = `You guessed correctly! The player is ${chosenPlayer.name} from ${chosenPlayer.hometown}, a ${chosenPlayer.position}, and is a ${chosenPlayer.class}`;
            newPuzzleButton.style.display = 'block';
        } else {
            guessesRemaining--;
            hintElement.textContent = `Incorrect guess. You have ${guessesRemaining} guesses remaining.`;
            if (guessesRemaining === 0) {
                hintElement.textContent = `Game over! The correct player was ${chosenPlayer.name} from ${chosenPlayer.hometown}, a ${chosenPlayer.position}, and is a ${chosenPlayer.class}`;
                newPuzzleButton.style.display = 'block';
            }
        }
    } else {
        displayResult({ name: 'Unknown', position: 'Unknown', class: 'Unknown', hometown: 'Unknown' }, false);
        guessesRemaining--;
        hintElement.textContent = `Incorrect guess. You have ${guessesRemaining} guesses remaining.`;
        if (guessesRemaining === 0) {
            hintElement.textContent = `Game over! The correct player was ${chosenPlayer.name} from ${chosenPlayer.hometown}, a ${chosenPlayer.position}, and is a ${chosenPlayer.class}`;
            newPuzzleButton.style.display = 'block';
        }
    }
    guessInput.value = '';
}

function displayResult(player) {
    const resultItem = document.createElement('div');
    resultItem.classList.add('result-item');
    const attributes = ['name', 'position', 'class', 'hometown'];
    attributes.forEach(attr => {
        const div = document.createElement('div');
        if (attr === 'hometown') {
            const state = player[attr].split(', ')[1];
            div.textContent = state; // Only display the state
            if (state === chosenPlayerState) {
                div.classList.add('correct');
            } else {
                div.classList.add('incorrect');
            }
        } else {
            div.textContent = player[attr];
            if (player[attr] === chosenPlayer[attr]) {
                div.classList.add('correct');
            } else {
                div.classList.add('incorrect');
            }
        }
        resultItem.appendChild(div);
    });
    resultsElement.appendChild(resultItem);
}

function startNewPuzzle() {
    chosenPlayer = rosterData[Math.floor(Math.random() * rosterData.length)];
    chosenPlayerFullName = chosenPlayer.name.toUpperCase();
    chosenPlayerState = chosenPlayer.hometown.split(', ')[1];
    guessesRemaining = maxGuesses;
    resultsElement.innerHTML = '';
    hintElement.textContent = '';
    guessInput.value = '';
    newPuzzleButton.style.display = 'none';
}